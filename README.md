# Описание

Этот проект - решение тестового задания от **Mera Capital**. Приложение написано на **Fast Api** с использованием **Celery** для периодического сбора информации о курсах валют.
В качестве брокера сообщений используется **Redis**, в качестве базы данныех - **Postgres**.


# Локальный запуск

Сперва необходимо создать базу данных Postgres, после чего записать имя пользователя, пароль и название базы в .env файл (пример в .env.example).
Далее запускаем в докере контейнер Redis с проброшенным 6379 портом `docker run -d -p 6379:6379 redis`. Устанавливаем необходимые пакеты `pip install -r ./app/requirements.txt`.

Теперь можно запускать сервер. Для этого необходмо находится на одном уровне с директорией **/app** в файловой системе. Команда запуска `uvicorn app.main:app --reload`.

После запуска сервера, необходимо открыть два новых терминала и также перейти на уровень **/app**. В одном терминале командой `celery -A app.celery_conf worker --loglevel=info` запускаем воркера (на Windows добавляется флаг `--pool=solo`), во втором командой `celery -A app.celery_conf beat --loglevel=info` запускаем celery beat.

# Запуск через Docker compose

Для запуска приложения в контейнерах докера необходимо из директории выше **/app** запустить команду `docker-compose -f ./app/dockerfiles/docker-compose.yml up --build`, для запуска в detached режиме добавляем флаг `-d`.
